<script context="module">
  export async function preload({ params, query }) {
    //console.log('')
    return;
  }
</script>

<script>
  import { Results, ResultsItem } from '../components/Results';
  import SearchWidget from '../components/SearchWidget.html';

  import { searchStore } from '../machines/search';
</script>

<svelte:head>
  <title>Search</title>
</svelte:head>

<SearchWidget />

<div class="content">
  {#if $searchStore.data && $searchStore.data.hits && $searchStore.data.hits.total > 0}

    <Results dirty={!!$searchStore.state.value.dirty}>
      {#each $searchStore.data.hits.hits as {_source} }
        <ResultsItem data={_source}></ResultsItem>
      {/each}
    </Results>

  {/if}
</div>


<style>
  .content {
    margin-left: 100px;
    width: 70%;
  }
</style>
