<script>
  export let status, visible;
  import { createEventDispatcher } from 'svelte';
  const dispatch = createEventDispatcher();
</script>

<div class="rule-controls">
  <span on:click="{() => dispatch('toggle')}">
    <svg
      class="{visible ? 'on' : 'off'}"
      width="100%"
      height="100%"
      viewBox="0 0 448 256"
      version="1.1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      xml:space="preserve"
      xmlns:serif="http://www.serif.com/"
      style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:1.41421;"
    >
      <path
        d="M448,128C448,57.355 390.645,0 320,0L128,0C57.355,0 0,57.355 0,128C0,198.645 57.355,256 128,256L320,256C390.645,256 448,198.645 448,128Z"
      />
      <path
        d="M320.153,80C346.62,80 368.153,101.533 368.153,128C368.153,154.467 346.62,176 320.153,176C293.686,176 272.153,154.467 272.153,128C272.153,101.533 293.686,80 320.153,80M320.153,48C275.97,48 240.153,83.817 240.153,128C240.153,172.183 275.97,208 320.153,208C364.336,208 400.153,172.183 400.153,128C400.153,83.817 364.336,48 320.153,48Z"
        style="fill-rule:nonzero;"
      />
      <path
        d="M320,32C372.934,32 416,75.065 416,128C416,180.935 372.934,224 320,224L128,224C75.065,224 32,180.935 32,128C32,75.065 75.065,32 128,32L320,32M320,0L128,0C57.308,0 0,57.308 0,128C0,198.692 57.308,256 128,256L320,256C390.692,256 448,198.692 448,128C448,57.308 390.692,0 320,0Z"
        style="fill-rule:nonzero;"
      />
    </svg>
  </span>
  {#if status === 'included'}
  <span on:click="{() => dispatch('change')}">
    <svg
      version="1.1"
      id="Layer_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      style="enable-background:new 0 0 512 512;"
      xml:space="preserve"
    >
      <g>
        <g>
          <g>
            <path
              d="M256,48C141.1,48,48,141.1,48,256s93.1,208,208,208c114.9,0,208-93.1,208-208S370.9,48,256,48z M256,446.7
				c-105.1,0-190.7-85.5-190.7-190.7c0-105.1,85.5-190.7,190.7-190.7c105.1,0,190.7,85.5,190.7,190.7
				C446.7,361.1,361.1,446.7,256,446.7z"
            />
          </g>
        </g>
        <rect x="128" y="248" width="256" height="17" />
      </g>
    </svg>
  </span>
  {:else}
  <span on:click="{() => dispatch('change')}">
    <svg
      version="1.1"
      id="Layer_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      style="enable-background:new 0 0 512 512;"
      xml:space="preserve"
    >
      <g>
        <g>
          <g>
            <path
              d="M256,48C141.1,48,48,141.1,48,256s93.1,208,208,208c114.9,0,208-93.1,208-208S370.9,48,256,48z M256,446.7
       c-105.1,0-190.7-85.5-190.7-190.7S150.9,65.3,256,65.3S446.7,150.9,446.7,256S361.1,446.7,256,446.7z"
            />
          </g>
        </g>
        <g>
          <polygon
            points="264.1,128 247.3,128 247.3,247.9 128,247.9 128,264.7 247.3,264.7 247.3,384 264.1,384 264.1,264.7 384,264.7
     384,247.9 264.1,247.9 		"
          />
        </g>
      </g>
    </svg>
  </span>
  {/if}

  <span on:click="{() => dispatch('delete')}">
    <svg
      version="1.1"
      id="Layer_1"
      xmlns="http://www.w3.org/2000/svg"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      x="0px"
      y="0px"
      viewBox="0 0 512 512"
      style="enable-background:new 0 0 512 512;"
      xml:space="preserve"
    >
      <g>
        <path
          d="M400,113.3h-80v-20c0-16.2-13.1-29.3-29.3-29.3h-69.5C205.1,64,192,77.1,192,93.3v20h-80V128h21.1l23.6,290.7
          c0,16.2,13.1,29.3,29.3,29.3h141c16.2,0,29.3-13.1,29.3-29.3L379.6,128H400V113.3z M206.6,93.3c0-8.1,6.6-14.7,14.6-14.7h69.5
          c8.1,0,14.6,6.6,14.6,14.7v20h-98.7V93.3z M341.6,417.9l0,0.4v0.4c0,8.1-6.6,14.7-14.6,14.7H186c-8.1,0-14.6-6.6-14.6-14.7v-0.4
          l0-0.4L147.7,128h217.2L341.6,417.9z"
          fill="#333"
        />
        <g>
          <rect x="249" y="160" width="14" height="241" fill="#333" />
          <polygon
            points="320,160 305.4,160 294.7,401 309.3,401 		"
            fill="#333"
          />
          <polygon
            points="206.5,160 192,160 202.7,401 217.3,401 		"
            fill="#333"
          />
        </g>
      </g>
    </svg>
  </span>
</div>

<style>
  div {
    height: 100%;

    display: flex;
    border: 1px solid #aaa;
    border-radius: 2rem;
    justify-content: center;
    background: #f6f6f6;
  }
  span {
    width: 1.5rem;
    margin: 0 0.2rem;
    display: flex;
    flex-direction: column;
    justify-content: center;
    cursor: pointer;
  }

  path {
    transition: 0.3s;
  }

  .off path:nth-of-type(1) {
    fill: #fff;
  }
  .off path:nth-of-type(2) {
    fill: #555;
    transform: translateX(-190px);
  }
  .off path:nth-of-type(3) {
    fill: #555;
  }

  .on path:nth-of-type(1) {
    fill: #555;
  }

  .on path:nth-of-type(2) {
    fill: #fff;
  }
  .on path:nth-of-type(3) {
    fill: #555;
  }
</style>
